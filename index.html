<!--
Code generated by chatGPT, using the following prompt:

create a html file that includes javascript code to download an auto-generated csv file when a link is clicked. 
The csv file should contain two columns of data, time and amplitude, for a simulated signal. 
The signal should be a sawtooth wave, with the growing segments of the wave form being exponential instead of linear, with a frequency randomly selected between 2 and 10 hertz, with an amplitude between fifteen and thirty watts per square meter.  
The signal should be obscured by random noise that is roughly ten percent of the amplitude. 
The signal should last a random amount of time, between three and five seconds, and contain 1000 samples per second. The first row of the csv file should contain headers "Time (s)" and "Amplitude (W/m^2)". 

Some minor adjustments were made by Mr. Connors.
-->

<!DOCTYPE html>
<html>
<head>
    <title>Project Data Generator</title>
</head>
<body>
    <h1>Download Simulated Data</h1>
    <a href="#" id="downloadLink">Download CSV</a>

    <script>
        function generateSawtoothWave() {
            // Random frequency between 2 and 10 Hz
            const frequency = Math.random() * (8) + 2;
            // Random amplitude between 15 and 30 W/m^2
            const amplitude = Math.random() * (15) + 15;
            // Random duration between 3 and 5 seconds
            const duration = Math.random() * (2) + 3;
            const sampleRate = 1000; // 1000 samples per second
            const totalSamples = Math.floor(duration * sampleRate);

            let data = [["Time (s)", "Amplitude (W/m^2)"]];
            const noiseFactor = 0.1 * amplitude; // 10% of the amplitude

            for (let i = 0; i < totalSamples; i++) {
                const time = i / sampleRate;
                // Calculate the sawtooth wave value with exponential growth
                const phase = (time * frequency) % 1; // Phase ranges from 0 to 1
                const exponentialValue = amplitude * (Math.exp(-5 * phase)); // Exponential segment
                const noise = (Math.random() - 0.5) * 2 * noiseFactor; // Random noise
                const signal = exponentialValue + noise;
                data.push([time.toFixed(6), signal.toFixed(6)]);
            }

            return data;
        }

        function downloadCSV() {
            const data = generateSawtoothWave();
            let csvContent = "data:text/csv;charset=utf-8,";
            data.forEach(rowArray => {
                let row = rowArray.join(",");
                csvContent += row + "\r\n";
            });

            const encodedUri = encodeURI(csvContent);
            const link = document.getElementById("downloadLink");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "projectData.csv");
        }

        document.getElementById("downloadLink").addEventListener("click", downloadCSV);
    </script>
</body>
</html>
